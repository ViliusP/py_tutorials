---
title: 'FailÅ³ apdorojimas'
description: 'Bla bla bla'
created_at: '2024-09-18'
updated_at: '2024-09-18'
authors:
  - 'Vilius Paliokas'
---

IÅ¡moksime savo programoms suteikti daugiau dinamiÅ¡kumo savo programoms - skaitysime iÅ¡ failo ir Ä¯raÅ¡ysime Ä¯ failÄ….

## Keletas failÅ³ formatÅ³

Pirma supaÅ¾inkime su keleta failÅ³ formatÅ³, kurios reiktÅ³ Å¾inoti esant programuotoju. Nors susipaÅ¾insime su keleta, toliau dirbsime tik su vieno tipo *CSV*.

### PlÄ—tinys

PrieÅ¡ pereinant prie konkreÄiÅ³ tipÅ³, reiktÅ³ iÅ¡siaiÅ¡kinti formatÄ… ir plÄ—tinio skirtumus. Failams, kuriuose talpiname *Python* kodÄ…, suteikiame vardÄ… ir priraÅ¡ome gale `.py`{ lang=text }. Å i failo pavadinimo dalis - galas vadinamas **plÄ—tiniu** (*angl. extension*). Labai svarbu suprasti tai, kad **failo plÄ—tinys nurodomas programoms, kad jos Å¾inotÅ³, ko tikÄ—tis iÅ¡ faile esanÄiÅ³ duomenÅ³** - kokia duomenÅ³ struktÅ«rÄ… ir kÄ… jie reprezentuoja.

Jeigu sukurtume tekstinÄ¯ failÄ… pavadinimu `data.txt`{ lang=text }:

```text[data.txt]
Labas, mama.
```

Tai mÅ«sÅ³ operacinÄ— sistema bandant paleisti Å¡Ä¯ failÄ…, atidarytÅ³ tekstinÄ™ rengyklÄ™. Niekas nedraudÅ¾ia Å¡itam failui suteikti kitokÄ¯ plÄ—tinÄ¯:

```text[data.mp3]
Labas, mama.
```

TokÄ¯ failÄ… operacinÄ— sistema bandys atidaryti naudojant muzikos grotuvÄ…. AtidarÄ™ turÄ—tumÄ—te pamatyti ekrane klaidÄ…. TokiÅ³ failÅ³ apdorojimas vyksta priklausomai taip, kaip numatÄ— jÄ¯ programotuojas.  

Å½emiau pateikta keletas plÄ—tiniÅ³, kuriuos reiktÅ³ Å¾inoti:

DokumentÅ³ failai:

- `.txt`{lang=text}: paprastas tekstinis failas;
- `.pdf`{lang=text}: neÅ¡iojamojo dokumento formatas (*angl. Portable Document Format*);
- `.doc/.docx`{lang=text}: Microsoft Word dokumento failas;
- `.ppt/.pptxt`{lang=text}: Microsoft PowerPoint pateikÄiÅ³ failas;

Grafikos failai:

- `.jpg/.jpeg`{lang=text}: Joint Photographic Experts Group (atvaizdo formatas);
- `.png`{lang=text}: Portable Network Graphics (atvaizdo formatas);
- `.gif`{lang=text}: Graphics Interchange Format (atvaizdo formatas);
- `.bmp`{lang=text}: Bitmap image file (atvaizdo formatas);
- `.svg`{lang=text}: Scalable Vector Graphics (vektorinÄ—s grafikos formatas);
- `.webp`{lang=text}: Modernus atvaizdo formatas Å¾iniatinkliui;

Audio ir video failai:

- `.mp3`{lang=text}: MPEG Audio Layer III (glaudtinas audio failÅ³ formatas);
- `.wav`{lang=text}: Waveform Audio File Format;
- `.flac`{lang=text}: Nemokamas glaudintas be praradimÅ³ (*angl. lossless*) audio kodekas (*angl. codec*);
- `.mp4`{lang=text}: MPEG-4 Part 14 (vienas iÅ¡ populiaresniÅ³ failÅ³ formatÅ³ video medÅ¾iagai);
- `.webm`{lang=text}: Atviras video duomenÅ³ formatas Å¾iniatinkliui;
- `.mkv`{lang=text}: Matroska Video (palaiko kelis garso ir subtitrÅ³ takelius);

Kita:

- `.xls/.xlsx`{lang=text}: Microsoft Excel skaiÄiuoklÄ—s failas;
- `.zip`: Glaudintas archyvinis failas;
- `.html`: HyperText Markup Language (Å½ymÄ—jimo kalbos, naudojamo saitymo elementÅ³ atvaizdavimui, failas);
- `.css`: Cascading Style Sheets file (pakopiniÅ³ stiliÅ³ Å¡ablonÅ³ failas);
- `.rar`: RAR archyvinis failas;

Kiekvieno failo specifika skiriasi, tai iÅ¡siaiÅ¡kinama, kada jie naudojami tiksliau ir kuo jie ypatingi, paliksime padaryti savarankiÅ¡kai.

### Formatas

Failo formatas nurodo, kaip duomenys faile yra uÅ¾koduoti ir struktÅ«rizuoti. Å is uÅ¾kodavimas ir strÅ«ktura nulemia tai, kaip duomenys yra saugomi, perskaitomi ir apdorojami programÅ³.

Toliau aptariami ir visi kiti formatai, daÅ¾niausiai, nÄ—ra priklausomi nuo programavimo kalbos ir naudojami Ä¯vairiose technologijose.

### CSV

CSV formatas iÅ¡siÅ¡ifruoja Ä¯ ***c**omma-**s**eparated **v**alues* - kableliais atskirtos reikÅ¡mÄ—s. PaÄiame pavadinime ir uÅ¾koduotas Å¡io formato principas.

Tokio formato duomenis patogu atvaizduoti lentele. Tarkime turime tris mokinius, kuriÅ³ duomenis atvaizduosime `csv`{ lang=text } formate. Pirmiausiai Ä¯ juos pasiÅ¾iÅ«rÄ—kime lentelÄ—je:

| Vardas    | Gimimo metai | Vidurkis | KlasÄ— |
| --------- | ------------ | -------- | ----- |
| Vilius    | 2002-15-10   | 5.7      | 11c   |
| Vilija    | 2009-07-11   | 9.5      | 4a    |
| Vilhelmas | 2007-09-08   | 6.6      | 9a    |

Tai Å¡ias reikÅ¡mes galima atvaizduoti atskirtas kabeliu:

```csv
Vardas,Gimimo metai,Vidurkis,KlasÄ—
Vilius,2002-15-10,5.7,11c
Vilija,2009-07-11,9.5,4a
Vilhelmas,2007-09-08,6.6,9a
```

Pirmojoje eilutÄ—je kartais galima surasti antraÅ¡tÄ™ - joje apraÅ¡yta tai, kÄ… galima rasti stulpeliuose, bet ji nÄ—ra bÅ«tina. Visos reikÅ¡mÄ—s yra atskirtos kableliais. Kartais tokio formato failuose prireikia panaudoti kablelÄ¯ reikÅ¡mÄ—je, todÄ—l gali bÅ«ti panaudoti kiti skyrikliai, pavyzdÅ¾iui kabliataÅ¡kis, :keyboard-keys{:keys='["TAB"]'} tarpas arba reikÅ¡mÄ—s gali bÅ«ti kabutÄ—se:

```csv
Minna;Amor;"oL2(qa>"".""";100.153.143.133
Midge;Sainthill;nM5#{nQWB3I|BH;74.204.156.127
Alexio;Velden;eW2*&@wtS;54.231.124.180
Catharine;Fazzioli;xT4&_cfN;190.42.255.251
```

```csv
first_name,last_name,email,balance
Tommie,Erangey,terangey0@surveymonkey.com,"â‚¬3,99"
Gustav,Glauber,gglauber1@mtv.com,"â‚¬8,90"
Prisca,Jerrold,pjerrold2@yahoo.com,"â‚¬7,14"
```

### JSON

JSON (***J**ava*S*cript **O**bject **N**otation*) - struktÅ«rizuotÅ³ duomenÅ³ formatas, daÅ¾niausiai naudojamas duomenÅ³ apsikeitimui tarp serverio ir narÅ¡yklÄ—s.

DaÅ¾niausiai internete, ten, kur keiÄiasi duomenys, jie Ä¯ narÅ¡yklÄ™ atkeliaujau *JSON* formatu. PavyzdÅ¾ius, prisijungus prie paskyros tinklalapyje, puslapis gali gauti panaÅ¡ius duomenis Ä¯ Å¡iuos apie jÅ«sÅ³ paskyrÄ…:

```json
{
  "account": {
    "id": "123456",
    "username": "john_doe",
    "email": "john.doe@example.com",
    "created_at": "2023-01-15T10:00:00Z",
    "status": "active",
    "profile": {
      "first_name": "John",
      "last_name": "Doe",
      "bio": "Software developer and tech enthusiast.",
      "profile_picture": "https://example.com/images/john_doe.jpg"
    },
    "settings": {
      "language": "en",
      "notifications": {
        "email": true,
        "sms": false
      }
    },
    "transactions": [
      {
        "transaction_id": "tx123",
        "amount": 150.00,
        "date": "2023-09-01T12:30:00Z",
        "type": "deposit"
      },
      {
        "transaction_id": "tx124",
        "amount": -50.00,
        "date": "2023-09-10T15:45:00Z",
        "type": "withdrawal"
      }
    ]
  }
}
```

Å iame pavyzdyje:

- *account*: duomenys apie paskyrÄ…;
- *id*: unikalus paskyros identifikatorius;
- ...
- *profile*: paskyros duomenys apie profilÄ¯;
- *settings*: nustatymai;
- *transactions*: transakcijÅ³ (sandoriÅ³) sÄ…raÅ¡as, kurie priklauso paskyrai.

Paimkime paprastesnÄ¯ pavyzdÄ¯:

```json
{
  "name": "Alice",
  "age": 30,
  "is_student": false,
  "favourite_fruits": ["apple", "banana", "cherry"]
}
```

Duomenys apraÅ¡yti *JSON* formatu prasideda figÅ«riniais skliaustais `{}`. Toliau yra laukeliai: kairysis vadinamas raktu, deÅ¡inys - reikÅ¡me.

Raktai: *"name"*, *"age"*, *"is_student"*, *"favourite_fruits"*.

ReikÅ¡mÄ—s: *"Alice"*, *30*, *false*, *["apple", "banana", "cherry"]*.

Å is formatas palaiko keletÄ… tipÅ³:

- eilutÄ—s (*angl. string*): tekstiniai duomenys pateikti dvigubose kabutÄ—se, pvz., "labas, pasauli";
- skaiÄiai: skaitiniai duomenys, pvz.: 42, 3.14;
- loginis (*angl. boolean*): vaizduoja *true* arba *false*;
- null: tuÅ¡Äia reikÅ¡mÄ—;
- objektas (*angl. object*): reikÅ¡miÅ³ ir raktÅ³ rinkinys, kuris apskliaustas figÅ«riniais skliaustais `{}`;
- rinkinys, sÄ…raÅ¡as (*angl. array*): reikÅ¡miÅ³ sÄ…raÅ¡as, kurios apraÅ¡omos skliaustuose `[]`.

Å io formato duomenÅ³ apdorojimas priklauso nuo programavimo kalbos.

### XML

`XML`{ lang=text } (angl. *e**X**tensible **M**arkup **L**anguage*) yra Å¾ymÄ—jimo kalba ir failÅ³ formatas. Å is formatas pastaruoju metu tampa vis maÅ¾iau populiaresnis. Naudojamas duomenÅ³ saugojimui ir apsikeitimui.  Å is formatas pasiÅ¾ymi `<`,`>`,`/` simboliais:

```xml
<catalog>
  <book id="bk101">
    <author>Gambardella, Matthew</author>
    <title>XML Developer's Guide</title>
    <genre>Computer</genre>
    <price>44.95</price>
    <publish_date>2000-10-01</publish_date>
    <description>An in-depth look at creating applications 
    with XML.</description>
  </book>
  <book id="bk102">
    <author>Ralls, Kim</author>
    <title>Midnight Rain</title>
    <genre>Fantasy</genre>
    <price>5.95</price>
    <publish_date>2000-12-16</publish_date>
    <description>A former architect battles corporate zombies, 
    an evil sorceress, and her own childhood to become queen 
    of the world.</description>
  </book>
  <book id="bk103">
    <author>Corets, Eva</author>
    <title>Maeve Ascendant</title>
    <genre>Fantasy</genre>
    <price>5.95</price>
    <publish_date>2000-11-17</publish_date>
    <description>After the collapse of a nanotechnology 
    society in England, the young survivors lay the 
    foundation for a new society.</description>
  </book>
</catalog>
```

Tokio formato duomenys prasideda nuo Å¡akninio (*angl. root*) elemento. Å iuo atveju tai `<catalog>...</catalog>`{ lang=xml }.  Nuo Å¡akninio elemento toliau einantys elementai vadinami elementais vaikais (*angl. child*). Santykiams apibÅ«dinti tarp elementÅ³ naudojamos sÄ…vokos tÄ—vinis (*angl. parent*) elementas, vaikas (*angl. child*), brolis (arba sesÄ—, *angl. siblings*). Broliniai elementai yra tame paÄiame lygyje esantys elementai.

PavyzdÅ¾iui elementui `<book id="bk101">...</book>`{ lang=xml } tÄ—vinis elementas yra `<catalog>...</catalog>`{ lang=xml }, `<author>Gambardella, Matthew</author>`{ lang=xml }, `<title>XML Developer's Guide</title>`{ lang=xml }, `<genre>Computer</genre>`{ lang=xml }, `<price>44.95</price>`{ lang=xml } ir kt. yra tarpusavyje broliniai elementai, o jiems tÄ—vinis yra `<book id="bk101">...</book>`{ lang=xml }.

Elementai savyje gali turÄ—ti tekstinÄ¯ turinÄ¯, pvz.: `Maeve Ascendant`{ lang=txt } arba atributus `id="bk103"`{ lang=xml }.

## Skaitymas iÅ¡ failo

Toliau visi darbai bus atliekami su `.csv`{ lang=python } failais. Padarysime taip, kad faile esantys duomenys, kaip kintamasis (-ieji), atsirastÅ³ mÅ«sÅ³ programoje. TokÄ¯ perkÄ—limo veiksmÄ… vadinsime failÅ³ nuskaitymu.

Kad atidarytumÄ—me failÄ…, jis turi egzistuoti jÅ«sÅ³ Ä¯renginyje, o kode tereikia panaudoti funkcijÄ… `open()`{ lang=python }:

```python
# In programming, there's a common convention to use 'f' as a short name for a file variable.
# This makes the code easier to read and understand for others who are familiar with this practice.
f = open("data.txt")
```

Tarkime, mÅ«sÅ³ `data.txt`{ lang=text} faile yra toks tekstas:

```text[data.txt]
Hello, World!
```

Jeigu bandytume atspausdinti `f`{ lang=python } kintamÄ…jÄ¯ nepamatytumÄ—me teksto. PamatytumÄ—te kaÅ¾kÄ… panaÅ¡aus Ä¯:

```console
<_io.TextIOWrapper name='data.txt' mode='r' encoding='UTF-8'>
```

Å iuo atveju kintamasis `f`{ lang=python } yra objektas (konkreÄiau apie Å¡iÄ… sÄ…vokÄ… suÅ¾inosite sekanÄiose pamokose), kuriame saugoma informacija apie atidarytÄ… failÄ….

### `readline()`{ lang=python }

AnksÄiau sukurtu objektu galime pasinaudoti, kad perskaitytumÄ—me informacijÄ…:

```python
f = open("data.txt")
line = f.readline()
print(line)
```

Terminale turÄ—tumÄ—te pamatyti mÅ«sÅ³ tekstÄ… `Hello, World!`{ lang=console }. Å itÄ… eilutÄ™ iÅ¡ duomenÅ³ failo gauname su `readline()`{ lang=python } metodu, o Å¡is grÄ…Å¾ina `string`{ lang=python } tipo reikÅ¡mÄ™. Pagal pavadinimÄ…, galite suprasti, kad perskaito vienÄ… eilutÄ™ (ir tik vienÄ…!).

#### Failo pabaiga

Kas bus jeigu perskaitysime daugiau eiluÄiÅ³ negu yra faile?

```python
f = open("data.txt")
line = f.readline() # 1st read
print(line)

line = f.readline() # 2nd read
print(line)

line = f.readline() # 3rd read
print(line)
```

Metodas `readline()`{ lang=python } graÅ¾ins tuÅ¡ÄiÄ… eilutÄ™ `""`{ lang=python }:

```console
Hello, World!


â¤
```

Tai reiÅ¡kias `readline()`{ lang=python } galima skaityti visÄ… failÄ…, o jeigu jis baigsis metodas graÅ¾ins tuÅ¡ÄiÄ… eilutÄ™.

O kas jeigu faile kaÅ¾kur viduryje yra tuÅ¡Äia eilutÄ—?

#### Keletas `readline()`{ lang=python } iÅ¡kvietimÅ³

Tarkime turime didesnÄ¯ failÄ…:

```text[bigger_data.txt]
My mother was a tailor
She sewed my new blue jeans
My father was a gamblin' man
Down in New Orleans

Now the only thing a gambler needs
Is a suitcase and a trunk
And the only time he's satisfied
Is when he's on a trump
Oh mother, tell your children
Not to do what I have done
Spend your lives in sin and misery
In the house of The Rising Sun
```

Kad galÄ—tume su `readline()`{ lang=python } metodu perskaityti Å¡eÅ¡ias eilutes, mums reikiÄ… Å¡Ä¯ metodÄ… panaudoti penkis kartus. PerskaiÄius eilutÄ™, kitÄ… kartÄ… skaitant, yra perskaitoma sekanti:

```python
f = open("bigger_data.txt")
print(f.readline()) # line 1
print(f.readline()) # line 2
print(f.readline()) # line 3
print(f.readline()) # line 4
print(f.readline()) # line 5
print(f.readline()) # line 6
```

PerskaiÄius ir atspausdintus 6 eilutes iÅ¡ failo, gauname tokÄ¯ rezultatÄ…

```console
My mother was a tailor

She sewed my new blue jeans

My father was a gamblin' man

Down in New Orleans



Now the only thing a gambler needs
â¤
```

Gauname daug pertekliniÅ³ tarpÅ³. Jie atsiranda dÄ—l to, kad faile, eilutÄ—s gale (ten, kur paspaudÅ¾iamas :keyboard-keys{:keys='["enter"]'} klaviÅ¡as) yra naujos eilutÄ—s simbolis `\n`{ lang=text }. Tai `print()`{ lang=python } funkcija ir naujos eilutÄ—s simbolis `\n`{ lang=text } kartu duoda dvigubÄ… naujÄ… eilutÄ™. Kad jos iÅ¡vengtume galima paÅ¡alinti iÅ¡ perskaitytos eilutÄ—s tÄ… simbolÄ¯ arba `print()`{ lang=python } funkcijoje neiÅ¡vedinÄ—ti (numatyto) naujos eilutÄ—s simbolio:

```python
f = open("bigger_data.txt")
print(f.readline().replace("\n", "")) # line 1, method 1
print(f.readline().replace("\n", "")) # line 2, method 1
print(f.readline().replace("\n", "")) # line 3, method 1
print(f.readline(), end="") # line 4, method 2
print(f.readline(), end="") # line 5, method 2
print(f.readline(), end="") # line 6, method 2
```

Dabar atspausdiname eilutes teisingai:

```console
My mother was a tailor
She sewed my new blue jeans
My father was a gamblin' man
Down in New Orleans

Now the only thing a gambler needs
```

Atkreipkite dÄ—mesÄ¯, kad tuÅ¡Äia eilutÄ— irgi perskaitoma, nes ji yra mÅ«sÅ³ duomenÅ³ faile.

#### Vienintelis argumentas

Å iam analizuojamam metodui galima pateikti vienÄ… argumentÄ… - skaiÄiÅ³, kuris nusako kiek bitÅ³ (daÅ¾nu atveju tai simboliÅ³) reikia nuskaityti iÅ¡ eilutÄ—s

```python
f = open("bigger_data.txt")
print(f.readline(12))
```

Bandydami nuskaityti pirmÄ… eilutÄ™ ir Ä¯raÅ¡Ä™, kad mums reikia 12 simboliÅ³, gausime tokÄ¯ rezultatÄ…:

```console
My mother wa
```

Å itÄ… metodÄ… tikriausiai teks naudoti retai.

### `readlines()`{ lang=python }

Jeigu norime nuskaityti iÅ¡ karto visas failo eilutes, galime pasinaudoti `readlines()` metodu. Å is metodas grÄ…Å¾ina visas failo eilutes sÄ…raÅ¡e:

```python
f = open("bigger_data.txt")
print(f.readlines())
```

```console
['My mother was a tailor\n', 'She sewed my new blue jeans\n', "My father was a gamblin' man\n", 'Down in New Orleans\n', '\n', 'Now the only thing a gambler needs\n', 'Is a suitcase and a trunk\n', "And the only time he's satisfied\n", "Is when he's on a trump\n", 'Oh mother, tell your children\n', 'Not to do what I have done\n', 'Spend your lives in sin and misery\n', 'In the house of The Rising Sun']
```

Problema ta, kad kiekviena eilutÄ—, jeigu po jos yra sekanti, turi naujos eilutÄ—s simbolÄ¯ `\n`{ lang=text }. Å iÄ… problemÄ… iÅ¡moksime sprÄ™sti vÄ—liau.

Å iam metodui irgi galima suteikti vienÄ… argumentÄ…, kuris taip pat nurodo, kiek bitÅ³ (simboliÅ³ ) nuskaityti.

### `read()`{ lang=python }

Su `read()`{ lang=python } metodu galima nuskaityti visÄ… failÄ… ir Å¡is metodas mums grÄ…Å¾ins vienÄ… eilutÄ—s reikÅ¡mÄ™, kuriame bus visas mÅ«sÅ³ tekstas:

```python
f = open("bigger_data.txt")
print(f.read())
```

```console
My mother was a tailor
She sewed my new blue jeans
My father was a gamblin' man
Down in New Orleans

Now the only thing a gambler needs
Is a suitcase and a trunk
And the only time he's satisfied
Is when he's on a trump
Oh mother, tell your children
Not to do what I have done
Spend your lives in sin and misery
In the house of The Rising Sun
```

### Iteravimas per objektÄ…

Galima pasinaudoti ciklu ir failo objektu, jeigu yra poreikis iteruoti per eilutes:

```python
f = open("bigger_data.txt")
for line in f:
    print(line, end="")
```

Gauname tokÄ¯ patÄ¯ rezultatÄ…, kaip ir su ankstesniais bÅ«dais

```console
My mother was a tailor
She sewed my new blue jeans
My father was a gamblin' man
Down in New Orleans

Now the only thing a gambler needs
Is a suitcase and a trunk
And the only time he's satisfied
Is when he's on a trump
Oh mother, tell your children
Not to do what I have done
Spend your lives in sin and misery
In the house of The Rising Sun
```

## Failo uÅ¾darymas su `close()`{ lang=python }

Nuo Å¡io poskyrio, visada uÅ¾darinÄ—sime atidarytÄ… failÄ… su `close()`{ lang=python } metodu. Tai padarysime, kai iÅ¡ atidaryto failo mums nieko nebereikÄ—s, visas darbas su juo bus atliktas:

```python{4}
f = open("bigger_data.txt")
print(f.readline())
# I don't need the file anymore, so I'm closing it to free up resources
f.close()
```

Tik reiktÅ³ suprasti tai, kad failas nebebus pasiekiamas jÄ¯ uÅ¾darius. Pabandykime perskaityti uÅ¾darytÄ… failÄ…:

```python
f = open("bigger_data.txt")
print(f.readline())
# I don't need the file anymore, so I'm closing it to free up resources
f.close()

# This will cause an error because the file is already closed
print(f.readline())
```

TurÄ—tumÄ—te pamatyti ganÄ—tinai aiÅ¡kiÄ… klaidÄ…:

```console
ValueError: I/O operation on closed file.
```

### Motyvai

NeiÅ¡radinÄ—sime dviraÄio ir pateiksime motyvus, kodÄ—l reikia uÅ¾darinÄ—ti fialus, iÅ¡ *Stack Overflow*:

> For the most part, not closing files is a bad idea, for the following reasons:
>
> 1. It puts your program in the garbage collectors hands - though the file in theory will be auto closed, it may not be closed. Python 3 and Cpython generally do a pretty good job at garbage collecting, but not always, and other variants generally suck at it.
> 2. It can slow down your program. Too many things open, and thus more used space in the RAM, will impact performance.
> 3. For the most part, many changes to files in python do not go into effect until after the file is closed, so if your script edits, leaves open, and reads a file, it won't see the edits.
> 4. You could, theoretically, run in to limits of how many files you can have open.
> 5. As @sai stated below, Windows treats open files as locked, so legit things like AV scanners or other python scripts can't read the file.
> 6. It is sloppy programming (then again, I'm not exactly the best at remembering to close files myself!)
>
> from [Why should I close files in Python? - Stack Overflow](https://stackoverflow.com/a/25070939)

Jeigu naudojami Å¾odÅ¾iai sudÄ—tingi, tai paprastai tariant:

- Tai yra programavimo geroji praktika;
- UÅ¾daroma dÄ—l programos greitaveikos;
- Gali kilti iÅ¡oriniÅ³ problemÅ³, nes atidaromas failas yra uÅ¾rakinamas tos programos, kuri tÄ… failÄ… ir atidaro. Tokiu atveju kitos programos negali jo atidaryti.

### RaktaÅ¾odis `with`{ lang=python }

*Python* kalboje uÅ¾darymÄ… galima atlikti ir automatiÅ¡kai su `with`{ lang=python } raktaÅ¾odÅ¾iu. KodÄ…, kurÄ¯ raÅ¡Ä—me anksÄiau:

```python
f = open("bigger_data.txt")
print(f.readline())
# I don't need the file anymore, so I'm closing it to free up resources
f.close()

print("The file is now closed and cannot be accessed anymore")
```

Galima pakeisti Ä¯ funkcionaliai lygiavertÄ¯ atitikmenÄ¯:

```python
# Pay attention to the indentation inside the 'with' block
with open("bigger_data.txt") as f:
  print(f.readline()) # This line is indented, this indicates it belongs to the 'with' block

print("The file is now closed and cannot be accessed anymore") # This line isn't indented, it does not belong to the 'with' block
```

Su raktaÅ¾odÅ¾iu `with`{ lang=python } mes sukuriame blokÄ…, kuriame galima pasiekti failo kintamÄ…jÄ¯, kurÄ¯ apraÅ¡ome su `as f`{ lang=python }. Kintamojo pavadinimÄ… galima keisti, tai galite padaryti tiesiog pakeitus `f`{ lang=python } Ä¯ kaÅ¾kÄ… kitÄ…:

```python
with open("bigger_data.txt") as song_lyrics_file:
  print(song_lyrics_file.readline()) 
```

## Apdorojimas

Nuo Äia ir toliau analizuosime, kaip apdoroti tik `.csv`{ lang=python } failus. Tarkime turime klientÅ³ sÄ…raÅ¡Ä… (15 eiluÄiÅ³ - 15 klientÅ³), kuriame pateiktas vardas, pavardÄ—, amÅ¾ius, el. paÅ¡tas, Å¡alis, telefono numeris:

```csv [customers.csv]
Renaud,Dispencer,46,rdispencer0@live.com,China,+86 474 126 7611
Misty,Cuttler,54,mcuttler1@bing.com,China,+86 599 457 8677
Merry,Mcettrick,70,mmcettrick2@woothemes.com,China,+86 306 934 3204
Ruby,Trulocke,33,rtrulocke3@acquirethisname.com,Poland,+48 186 302 8630
Ahmed,Dossett,26,adossett4@cdc.gov,Belarus,+375 170 210 1648
Taryn,Eayrs,36,teayrs5@chicagotribune.com,China,+86 201 744 4817
Armin,Starie,52,astarie6@com.com,United Arab Emirates,+971 135 992 7474
Arron,Beauvais,60,abeauvais7@networksolutions.com,Philippines,+63 245 245 6107
Ulrick,Ellsbury,67,uellsbury8@mayoclinic.com,France,+33 124 167 9435
Louise,McGiff,52,lmcgiff9@naver.com,Sri Lanka,+94 752 778 0341
Loise,Farris,56,lfarrisa@census.gov,Brazil,+55 124 687 2374
Conny,Aloshkin,70,caloshkinb@state.tx.us,China,+86 788 945 5235
Jedidiah,Pemberton,37,jpembertonc@blog.com,Japan,+81 266 348 0766
Willdon,Deboy,25,wdeboyd@forbes.com,Indonesia,+62 155 660 7974
Cleopatra,McMaster,55,cmcmastere@nps.gov,Japan,+81 255 140 4796
```

Tekstinius duomenis turÄ—tume mokÄ—ti perskaityti:

```python
f = open("customers.csv")
raw_data = f.readlines()
f.close()
```

### Pradinis sutvarkymas

Kadangi mÅ«sÅ³ `raw_data`{ lang=python} turi nereikalingÅ³ naujos eilutÄ—s simboliÅ³ `\n`{ lang=text }, jÄ¯ paÅ¡alinkime:

```python
f = open("customers.csv")
raw_data = f.readlines()
f.close()

for i in range(len(raw_data)):
    raw_data[i] = raw_data[i].replace("\n", "")

print(raw_data)
```

Gauname Å¡varesnias eilutes:

```console
['Renaud,Dispencer,46,rdispencer0@live.com,China,+86 474 126 7611', 'Misty,Cuttler,54,mcuttler1@bing.com,China,+86 599 457 8677', 'Merry,Mcettrick,70,mmcettrick2@woothemes.com,China,+86 306 934 3204', 'Ruby,Trulocke,33,rtrulocke3@acquirethisname.com,Poland,+48 186 302 8630', 'Ahmed,Dossett,26,adossett4@cdc.gov,Belarus,+375 170 210 1648', 'Taryn,Eayrs,36,teayrs5@chicagotribune.com,China,+86 201 744 4817', 'Armin,Starie,52,astarie6@com.com,United Arab Emirates,+971 135 992 7474', 'Arron,Beauvais,60,abeauvais7@networksolutions.com,Philippines,+63 245 245 6107', 'Ulrick,Ellsbury,67,uellsbury8@mayoclinic.com,France,+33 124 167 9435', 'Louise,McGiff,52,lmcgiff9@naver.com,Sri Lanka,+94 752 778 0341', 'Loise,Farris,56,lfarrisa@census.gov,Brazil,+55 124 687 2374', 'Conny,Aloshkin,70,caloshkinb@state.tx.us,China,+86 788 945 5235', 'Jedidiah,Pemberton,37,jpembertonc@blog.com,Japan,+81 266 348 0766', 'Willdon,Deboy,25,wdeboyd@forbes.com,Indonesia,+62 155 660 7974', 'Cleopatra,McMaster,55,cmcmastere@nps.gov,Japan,+81 255 140 4796']
```

Dabar galima atskirti eilutÄ—se kableliais atskirtus duomenis.

```python
f = open("customers.csv")
raw_data = f.readlines()
f.close()

data=[]

for i in range(len(raw_data)):
    line_data = raw_data[i].replace("\n", "").split(",")
    data.append(line_data) 
    print(line_data)
```

SukÅ«rime sÄ…raÅ¡us sÄ…raÅ¡e ir todÄ—l galima pasiekti kiekvienÄ… atskirÄ… duomenÅ³ laukelÄ¯:

```console
['Renaud', 'Dispencer', '46', 'rdispencer0@live.com', 'China', '+86 474 126 7611']
['Misty', 'Cuttler', '54', 'mcuttler1@bing.com', 'China', '+86 599 457 8677']
['Merry', 'Mcettrick', '70', 'mmcettrick2@woothemes.com', 'China', '+86 306 934 3204']
['Ruby', 'Trulocke', '33', 'rtrulocke3@acquirethisname.com', 'Poland', '+48 186 302 8630']
['Ahmed', 'Dossett', '26', 'adossett4@cdc.gov', 'Belarus', '+375 170 210 1648']
['Taryn', 'Eayrs', '36', 'teayrs5@chicagotribune.com', 'China', '+86 201 744 4817']
['Armin', 'Starie', '52', 'astarie6@com.com', 'United Arab Emirates', '+971 135 992 7474']
['Arron', 'Beauvais', '60', 'abeauvais7@networksolutions.com', 'Philippines', '+63 245 245 6107']
['Ulrick', 'Ellsbury', '67', 'uellsbury8@mayoclinic.com', 'France', '+33 124 167 9435']
['Louise', 'McGiff', '52', 'lmcgiff9@naver.com', 'Sri Lanka', '+94 752 778 0341']
['Loise', 'Farris', '56', 'lfarrisa@census.gov', 'Brazil', '+55 124 687 2374']
['Conny', 'Aloshkin', '70', 'caloshkinb@state.tx.us', 'China', '+86 788 945 5235']
['Jedidiah', 'Pemberton', '37', 'jpembertonc@blog.com', 'Japan', '+81 266 348 0766']
['Willdon', 'Deboy', '25', 'wdeboyd@forbes.com', 'Indonesia', '+62 155 660 7974']
['Cleopatra', 'McMaster', '55', 'cmcmastere@nps.gov', 'Japan', '+81 255 140 4796']
```

Toliau galima naudodami ciklÄ… cikle skaiÄiuoti Ä¯verÄius, apdoroti duomenis.

### Atvaizdavimas lentele

Naudojantis `f-strings`{ lang=python } tokius duomenis galima pateikti lentele:

```python [pretty_table.py]
f = open("customers.csv")
raw_data = f.readlines()
f.close()

data = []

# Data clean
for i in range(len(raw_data)):
    line_data = raw_data[i].replace("\n", "").split(",")
    data.append(line_data)

# Formatting lines
formatted_lines = []
header = ["Name", "Surname", "Age", "Email", "Country", "Tel. Number"]
data.insert(0, header)
for line in data:
    f_line = f"| {line[0]:10} | {line[1]:10} | {line[2]:>3} | {line[3]:>32} | {line[4]:>20} | {line[5]:>18} |"
    formatted_lines.append(f_line)

# Printing
seperator_line = "-"*len(formatted_lines[0])
print(seperator_line)
for i, line in enumerate(formatted_lines):
    print(line)
    if(i == 0):
        print(seperator_line)
print(seperator_line)
```

```console
----------------------------------------------------------------------------------------------------------------
| Name       | Surname    | Age |                            Email |              Country |        Tel. Number |
----------------------------------------------------------------------------------------------------------------
| Renaud     | Dispencer  |  46 |             rdispencer0@live.com |                China |   +86 474 126 7611 |
| Misty      | Cuttler    |  54 |               mcuttler1@bing.com |                China |   +86 599 457 8677 |
| Merry      | Mcettrick  |  70 |        mmcettrick2@woothemes.com |                China |   +86 306 934 3204 |
| Ruby       | Trulocke   |  33 |   rtrulocke3@acquirethisname.com |               Poland |   +48 186 302 8630 |
| Ahmed      | Dossett    |  26 |                adossett4@cdc.gov |              Belarus |  +375 170 210 1648 |
| Taryn      | Eayrs      |  36 |       teayrs5@chicagotribune.com |                China |   +86 201 744 4817 |
| Armin      | Starie     |  52 |                 astarie6@com.com | United Arab Emirates |  +971 135 992 7474 |
| Arron      | Beauvais   |  60 |  abeauvais7@networksolutions.com |          Philippines |   +63 245 245 6107 |
| Ulrick     | Ellsbury   |  67 |        uellsbury8@mayoclinic.com |               France |   +33 124 167 9435 |
| Louise     | McGiff     |  52 |               lmcgiff9@naver.com |            Sri Lanka |   +94 752 778 0341 |
| Loise      | Farris     |  56 |              lfarrisa@census.gov |               Brazil |   +55 124 687 2374 |
| Conny      | Aloshkin   |  70 |           caloshkinb@state.tx.us |                China |   +86 788 945 5235 |
| Jedidiah   | Pemberton  |  37 |             jpembertonc@blog.com |                Japan |   +81 266 348 0766 |
| Willdon    | Deboy      |  25 |               wdeboyd@forbes.com |            Indonesia |   +62 155 660 7974 |
| Cleopatra  | McMaster   |  55 |               cmcmastere@nps.gov |                Japan |   +81 255 140 4796 |
----------------------------------------------------------------------------------------------------------------
```

### Vidurkio skaiÄiavimas

Kai jau turime sutvarkytus duomenis sÄ…raÅ¡e, juos galima pasiekti ir apskaiÄiuoti mums rÅ«pimus Ä¯verÄius. ApskaiÄiuokime klientÅ³ amÅ¾iaus vidurkÄ¯:

```python
f = open("customers.csv")
raw_data = f.readlines()
f.close()

data = []

# Clean the data
for i in range(len(raw_data)):
    line_data = raw_data[i].strip().split(",")
    data.append(line_data)

# Calculate the average age
age_sum = 0
for customer in data:
    # The third field (index=2) contains age information
    age_sum += int(customer[2])

print(f"Average age of customers: {age_sum / len(data):.1f}")
```

Gauname, kad mÅ«sÅ³ klientÅ³ amÅ¾iaus vidurkis yra:

```console
Average age of customers: 49.3
```

## Metodo open() *mode* argumentas

Kai *Python* kalboje raÅ¡ome

```python line-numbers=false
f = open("customers.csv")
```

iÅ¡ tikro yra Ä¯vykdomas metodas

```python line-numbers=false
f = open("customers.csv", "r")
```

Å i argumento reikÅ¡mÄ— yra numatytoji (*angl. default*) ir jeigu nenurodoma kita, su tokia reikÅ¡me metodas yra Ä¯vykdomas. Antrasis argumentas yra Ä¯vardijamas, kaip bÅ«das (*angl. mode*), kuris nurodo, kaip failas bus naudojamas.

ReikÅ¡mÄ— `"r"`{ lang=python } nurodo, kad failas bus atidaromas skaitymui. 

| Item                  | PaaiÅ¡kinimas                                                                                                                                                |
| :-------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `"r"`{ lang=python }  | Failas atidaromas skaitymui                                                                                                                                 |
| `"r+"`{ lang=python } | Failas atidaromas skaitymui ir raÅ¡ymui. RaÅ¡ymas vykdomas failo pradÅ¾ioje                                                                                    |
| `"w"`{ lang=python }  | Failas atidaromas raÅ¡ymui. IÅ¡trinami visi failo duomenys arba failas sukuriamas, jeigu jis neegzistuoja. RaÅ¡ymas vykdomas failo **pradÅ¾ioje**               |
| `"w+"`{ lang=python } | Failas atidaromas skaitymui ir raÅ¡ymui. IÅ¡trinami visi failo duomenys arba failas sukuriamas, jeigu jis neegzistuoja.  RaÅ¡ymas vykdomas failo **pradÅ¾ioje** |
| `"a"`{ lang=python }  | Failas atidaromas raÅ¡ymui. Failas sukuriamas, jeigu jis neegzistuoja. RaÅ¡ymas vykdomas failo **pabaigoje**                                                  |
| `"a+"`{ lang=python } | Failas atidaromas skaitymui ir raÅ¡ymui. Failas sukuriamas, jeigu jis neegzistuoja.  RaÅ¡ymas vykdomas failo **pabaigoje**                                    |

IÅ¡ Å¡ios lentelÄ—s galima iÅ¡skirti pagrindinius taisykles:

- `"r"`{ lang=python } niekada nesukuria faila ir neiÅ¡trina inforamcijos;
- `"w"`{ lang=python } visada iÅ¡trina esamÄ… informacijÄ… faile ir Ä¯raÅ¡ymas pradedamas nuo *tuÅ¡Äio lapo*;
- `"a"`{ lang=python } atidaromas failas informacijos raÅ¡ymui pridedant prie jau informacijos faile esamos;
- `"+"`{ lang=python } nurodo, kad failas bus atidaromas ir skaitymui, ir raÅ¡ymui.

Kad lengviau Ä¯simintumÄ—te, reikia suprasti, kad Å¡ios raidÄ—s yra Å¾odÅ¾iÅ³ trumpiniai:

- `"r"`{ lang=python } *read*;
- `"w"`{ lang=python } *write*;
- `"a+"`{ lang=python } *append*.

Galite savarankiÅ¡kai paekspermentuoti su skirtingais argumentais ir iÅ¡bandyti nuskaityti ir Ä¯raÅ¡inÄ—ti duomenis iÅ¡ failÅ³. Kadangi dar neÅ¾inome, kad Ä¯raÅ¡yti duomenis Ä¯ failÄ…, einame Ä¯ kitÄ… skyriÅ³.

## RaÅ¡ymas Ä¯ failÄ…

Kaip galima skaityti iÅ¡ failo, taip galima ir Ä¯raÅ¡yti. Tam naudosime metodÄ… `write()`{ lang=python } ir  `"w"`{ lang=python } argumentÄ… atidarant failÄ….

Paimkime anksÄiau sukurtÄ… kodÄ…, kuris `.csv`{ lang=text } duomenis atvaizduoja lentele. Tik Å¡Ä¯ kartÄ… rezultatus pateiksime faile:

```python [pretty_table.py] { 20-24, 26, 28-30 }
f = open("customers.csv")
raw_data = f.readlines()
f.close()

data = []

# Cleaning data
for i in range(len(raw_data)):
    line_data = raw_data[i].replace("\n", "").split(",")
    data.append(line_data)

# Formatting lines
formatted_lines = []
header = ["Name", "Surname", "Age", "Email", "Country", "Tel. Number"]
data.insert(0, header)
for line in data:
    f_line = f"| {line[0]:10} | {line[1]:10} | {line[2]:>3} | {line[3]:>32} | {line[4]:>20} | {line[5]:>18} |"
    formatted_lines.append(f_line)

# Writing to the file
f_results = open("results.txt", "w")  # Opening the file for writing. It will create the file automatically if it does not exist

separator_line = "-" * len(formatted_lines[0]) + "\n"
f_results.write(separator_line)
for i, line in enumerate(formatted_lines):
    f_results.write(line + '\n')
    if i == 0:
        f_results.write(separator_line)
f_results.write(separator_line)
f_results.close()
```

Paleidus programÄ…, turÄ—tumÄ—te pamatyti naujai atsiradusÄ¯ failÄ… `results.txt`{ lang=text }:

```text [results.txt]
----------------------------------------------------------------------------------------------------------------
| Name       | Surname    | Age |                            Email |              Country |        Tel. Number |
----------------------------------------------------------------------------------------------------------------
| Renaud     | Dispencer  |  46 |             rdispencer0@live.com |                China |   +86 474 126 7611 |
| Misty      | Cuttler    |  54 |               mcuttler1@bing.com |                China |   +86 599 457 8677 |
| Merry      | Mcettrick  |  70 |        mmcettrick2@woothemes.com |                China |   +86 306 934 3204 |
| Ruby       | Trulocke   |  33 |   rtrulocke3@acquirethisname.com |               Poland |   +48 186 302 8630 |
| Ahmed      | Dossett    |  26 |                adossett4@cdc.gov |              Belarus |  +375 170 210 1648 |
| Taryn      | Eayrs      |  36 |       teayrs5@chicagotribune.com |                China |   +86 201 744 4817 |
| Armin      | Starie     |  52 |                 astarie6@com.com | United Arab Emirates |  +971 135 992 7474 |
| Arron      | Beauvais   |  60 |  abeauvais7@networksolutions.com |          Philippines |   +63 245 245 6107 |
| Ulrick     | Ellsbury   |  67 |        uellsbury8@mayoclinic.com |               France |   +33 124 167 9435 |
| Louise     | McGiff     |  52 |               lmcgiff9@naver.com |            Sri Lanka |   +94 752 778 0341 |
| Loise      | Farris     |  56 |              lfarrisa@census.gov |               Brazil |   +55 124 687 2374 |
| Conny      | Aloshkin   |  70 |           caloshkinb@state.tx.us |                China |   +86 788 945 5235 |
| Jedidiah   | Pemberton  |  37 |             jpembertonc@blog.com |                Japan |   +81 266 348 0766 |
| Willdon    | Deboy      |  25 |               wdeboyd@forbes.com |            Indonesia |   +62 155 660 7974 |
| Cleopatra  | McMaster   |  55 |               cmcmastere@nps.gov |                Japan |   +81 255 140 4796 |
----------------------------------------------------------------------------------------------------------------
```

Programoje atlikome keletÄ… modifikacijÅ³:

1. AtidarÄ—me rezultatÅ³ failÄ… su `"w"`{ lang=python } (20 eil.);
2. Jam neegzistuojant, programa pati jÄ¯ sukÅ«rÄ— (20 eil.);
3. AnksÄiau `print()`{ lang=python } funkcija automatiÅ¡kai sudÄ—davo `\n`{ lang=text } simbolius, o `write()`{ lang=python } metodas to nedaro, todÄ—l Ä¯raÅ¡omoms eilutÄ—ms turÄ—jom tÄ… pridÄ—ti (23 ir 26 eil.);
4. \* 26 eilutÄ—je `\n`{ lang=text } simbolio pridÄ—jimÄ… galÄ—tume iÅ¡kelti Ä¯ 17 eilutÄ™.;
5. Funkcijas `print()`{ lang=python } pakeitÄ—me Ä¯ `f_results.write()`{ lang=python } (24, 26, 28, 29 eil.).
6. **UÅ¾darÄ—me failÄ…!** (30 eil.)

ReiktÅ³ pastebÄ—ti tai:

- modifikuojant iÅ¡vesties tekstÄ… ir paleidus programÄ…, rezultatÅ³ failo turinys yra iÅ¡trinamas ir Ä¯raÅ¡omas naujas. Taip vyksta kiekviena kartÄ… paleidus programÄ…;
- netyÄia uÅ¾vadinus iÅ¡vesties failÄ… `customers.csv`{ lang=text} jÅ«sÅ³ duomenÅ³ failo informacija bÅ«tÅ³ iÅ¡trinta. **Atsargiai nurodykite failo pavadinimÄ…!**;
- naujas eilutes reikia Ä¯vesti rankiniu bÅ«du.  

### Metodas `writeLines()`{ lang=python }

Jeigu turime sÄ…raÅ¡Ä… eiluÄiÅ³, kurias norime iÅ¡vesti Ä¯ iÅ¡vestÄ¯, tÄ… galime padaryti su `writeLines()`{ lang=python } metodu. VÄ—l pakeiskime anksÄiau analizuotÄ… kodÄ… ir pritaikykime jÄ¯ tam, kad galÄ—tume panaudoti anksÄiau minÄ—tÄ… metodÄ…:

```python { 17, 20-23, 25-27}
f = open("customers.csv")
raw_data = f.readlines()
f.close()

data = []

# Cleaning data
for i in range(len(raw_data)):
    line_data = raw_data[i].replace("\n", "").split(",")
    data.append(line_data)

# Formatting lines for writing to the file
formatted_lines = []
header = ["Name", "Surname", "Age", "Email", "Country", "Tel. Number"]
data.insert(0, header)
for i, line in enumerate(data):
    f_line = f"| {line[0]:10} | {line[1]:10} | {line[2]:>3} | {line[3]:>32} | {line[4]:>20} | {line[5]:>18} |\n"
    formatted_lines.append(f_line)

separator_line = "-" * len(formatted_lines[0])
formatted_lines.append(separator_line)  # Adding separator at the bottom of the table
formatted_lines.insert(1, separator_line + '\n')  # Adding separator after the header row
formatted_lines.insert(0, separator_line + '\n')  # Adding separator before the header row

# Writing to the file
with open("results.txt", "w") as f_results:
    f_results.writelines(formatted_lines)
```

VisÄ… iÅ¡vesties formavimÄ… perkelÄ—me prieÅ¡ failo Ä¯raÅ¡ymÄ…, o paskui jÄ¯ tik Ä¯raÅ¡Ä—me Ä¯ failÄ…:

1. Prie suformuotos eilutÄ—s pridÄ—jome naujos eilutÄ—s simbolÄ¯ `\n`{ lang=python } (17 eil.);
2. SkyrikliÅ³ (brÅ«kÅ¡neliÅ³) eilutes Ä¯terpÄ—me atskirai Ä¯ iÅ¡viesties eiluÄiÅ³ sÄ…raÅ¡Ä… (20-23 eil.);
3. Failo atidarymÄ… pakeitemÄ— (dÄ—l pavyzdÅ¾io) naudojant `with`{ lang=python } raktaÅ¾odÄ¯ (26 eil.);
4. IÅ¡vesÄiai Ä¯ failÄ… pateikÄ—me visÄ… sÄ…raÅ¡Ä… eiluÄiÅ³, kurias norime Ä¯raÅ¡yti Ä¯ failÄ… (27 eil.)

### DuomenÅ³ pridÄ—jimas prie failo

Kai naudojame `"w"`{ lang=python } argumentÄ…, Ä¯raÅ¡ymas visada prasideda nuo tuÅ¡Äio failo. Kartais reikia iÅ¡laikyti senÄ…jÄ… informacijÄ…, prie jos pridedant naujÄ…jÄ…. DaÅ¾nai to reikia, kai pildome iÅ¡viestis Å¾urnalÄ… (*angl. log*). Tokie Å¾urnalai leidÅ¾ia pamatyti, kokie veiksmai buvo atlikti, kaip vyksta skaiÄiavimai ar atliekami veiksmai programoje. Turinys priklauso nuo paÄio programuotojo.

Sukurkime paprastÄ… programÄ…, kuri, Ä¯vedant Ä¯ terminalÄ…, keliÄ… skaiÄiÅ³ laipsniu, kuris taip pat Ä¯vedamas Ä¯ terminalÄ…. Å ioje programoje taip pat bus Ä¯vesties apsauga.

```python
print("-" * 50)
print("Program has started")
print("This program calculates the number c = a^b")
print("-" * 50)

a = None
while a is None:
    try:
        a_input=input("Enter number a: ")
        a=int(a_input)
    except:
        print("You entered a non-numeric value. Please try again.")

b = None 
while b is None:
    try:
        b_input=input("Enter number b: ")
        b=int(b_input)
    except:
        print("You entered a non-numeric value. Please try again.")

c=a**b

print("-"*50)
print(f"Your result c = {c}")
```

Kol kas mÅ«sÅ³ programoje nÄ—ra iÅ¡vesties Ä¯ failÄ….  Padaryta taip, kad naudotojas turÄ—tÅ³ Ä¯vedinÄ—t skaiÄiÅ³ tol, kol jis bus tinkamas. Ä®gyvendinkime registravimÄ… Ä¯ Å¾urnalÄ…. Jame registruosime Ä¯vykusias klaidas, rezultatus:

```python
from datetime import datetime

log = open("log.txt", "a")
log.write(f"info: program started at {datetime.today().strftime('%Y-%m-%d %H:%M:%S')}\n")

print("-" * 50)
print("Program has started")
print("This program calculates the number c = a^b")
print("-" * 50)

a = None
while a is None:
    try:
        a_input = input("Enter number a: ")
        log.write(f"info: user entered a as \"{a_input}\"\n")
        a = int(a_input)
    except:
        print("You entered a non-numeric value. Please try again.")
        log.write("error: a_input is not a number\n")

b = None
while b is None:
    try:
        b_input = input("Enter number b: ")
        log.write(f"info: user entered b as \"{b_input}\"\n")
        b = int(b_input)
    except:
        print("You entered a non-numeric value. Please try again.")
        log.write("error: b_input is not a number\n")

c = a ** b

print("-" * 50)
print(f"Your result c = {c}")
log.write(f"info: Calculation result: {a}**{b}={c}\n")
log.write("-" * 50 + "\n")
log.close()
```

Taip galima sekti programos veikimÄ… ir saugoti tuos duomenis ilgame laikotarpyje.

```text [log.txt]
info: program started at 2024-09-23 15:43:25
info: user entered a as "5"
info: user entered b as "2"
info: Calculation result: 5**2=25
--------------------------------------------------
info: program started at 2024-09-23 15:43:30
info: user entered a as "non number"
error: a_input is not a number
info: user entered a as "probably not number"
error: a_input is not a number
info: user entered a as "10"
info: user entered b as b stands for banana
error: b_input is not a number
info: user entered b as "4"
info: Calculation result: 10**4=10000
--------------------------------------------------
info: program started at 2024-09-23 15:44:13
info: user entered a as "[15~b"
error: a_input is not a number
info: user entered a as "2"
info: user entered b as "a"
error: b_input is not a number
info: user entered b as "10"
info: Calculation result: 2**10=1024
--------------------------------------------------
```

## UÅ¾duotys

### 1. Teksto daliÅ³ kiekis

SuskaiÄiuokite, kiek simboliÅ³, Å¾odÅ¾iÅ³, sakiniÅ³ sudaro Å¾emiau pateiktÄ… tekstÄ…:

```text [lorem_ipsum.txt]
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec vulputate tortor et accumsan porttitor. Fusce auctor consequat metus et sodales. Nam ac scelerisque ex, id condimentum velit. Donec eget mi sed mauris ultricies porta. Curabitur mollis est mauris, a faucibus metus interdum eu. Maecenas vel mi nunc. Nunc facilisis, dolor ut dapibus ultricies, nibh mauris condimentum eros, vel faucibus eros enim quis nunc. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Nullam at turpis eros. Donec eu hendrerit mi. In hac habitasse platea dictumst. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Curabitur et mattis felis. Curabitur commodo interdum nisi, nec lacinia risus scelerisque in. Lorem ipsum dolor sit amet, consectetur adipiscing elit.

Fusce sodales, felis eleifend fringilla condimentum, dui nibh ultricies elit, sit amet elementum risus metus id mi. Praesent dapibus sapien eu velit imperdiet, eget hendrerit neque porta. Quisque tincidunt enim odio, id maximus nunc placerat at. Nullam ac dui turpis. Nullam ultrices scelerisque posuere. Cras quis nunc ante. Donec lobortis, lorem ultricies consectetur dapibus, ipsum odio tristique leo, laoreet ornare velit turpis vitae libero. Fusce at elit vitae massa tincidunt condimentum eget ac urna.

Aenean scelerisque auctor sem, sit amet finibus tortor pellentesque sit amet. Mauris ut ante euismod mauris hendrerit iaculis eget vitae magna. Integer sapien nisl, porta a auctor. 
```

### 1. Daugybos lentelÄ—

Sudarykite daugybos lentelÄ™, Å¡iÄ… lentelÄ™ iÅ¡saugokite faile. LentelÄ—s dydis turi bÅ«ti Ä¯vedamas naudotojo:

IÅ¡vesties pavyzdys:

```console
Enter the size of the multiplication table: 13
Multiplication table of size 13 saved to 'multiplication_table.txt'.
```

RezultatÅ³ failo pavyzdys:

```text [multiplcation_table.txt]
    ||   1 |   2 |   3 |   4 |   5 |   6 |   7 |   8 |   9 |  10 |  11 |  12 |  13
----------------------------------------------------------------------------------
  1 ||   1 |   2 |   3 |   4 |   5 |   6 |   7 |   8 |   9 |  10 |  11 |  12 |  13
  2 ||   2 |   4 |   6 |   8 |  10 |  12 |  14 |  16 |  18 |  20 |  22 |  24 |  26
  3 ||   3 |   6 |   9 |  12 |  15 |  18 |  21 |  24 |  27 |  30 |  33 |  36 |  39
  4 ||   4 |   8 |  12 |  16 |  20 |  24 |  28 |  32 |  36 |  40 |  44 |  48 |  52
  5 ||   5 |  10 |  15 |  20 |  25 |  30 |  35 |  40 |  45 |  50 |  55 |  60 |  65
  6 ||   6 |  12 |  18 |  24 |  30 |  36 |  42 |  48 |  54 |  60 |  66 |  72 |  78
  7 ||   7 |  14 |  21 |  28 |  35 |  42 |  49 |  56 |  63 |  70 |  77 |  84 |  91
  8 ||   8 |  16 |  24 |  32 |  40 |  48 |  56 |  64 |  72 |  80 |  88 |  96 | 104
  9 ||   9 |  18 |  27 |  36 |  45 |  54 |  63 |  72 |  81 |  90 |  99 | 108 | 117
 10 ||  10 |  20 |  30 |  40 |  50 |  60 |  70 |  80 |  90 | 100 | 110 | 120 | 130
 11 ||  11 |  22 |  33 |  44 |  55 |  66 |  77 |  88 |  99 | 110 | 121 | 132 | 143
 12 ||  12 |  24 |  36 |  48 |  60 |  72 |  84 |  96 | 108 | 120 | 132 | 144 | 156
 13 ||  13 |  26 |  39 |  52 |  65 |  78 |  91 | 104 | 117 | 130 | 143 | 156 | 169
```

LentelÄ—s apipavidalinimÄ… ir iÅ¡vestÄ¯ galite keisti savo nuoÅ¾iÅ«rÄ….

### 2. Netinkami slaptaÅ¾odÅ¾iai

IÅ¡ pateikto sÄ…raÅ¡o atrinkite asmenis, kuriÅ³ slaptaÅ¾odÅ¾iai netinkami - slaptaÅ¾odÄ¯ sudaro 5 ir maÅ¾iau simboliai, ir juos pateikite atskirame rezultatÅ³ faile.

```csv [passwords.csv]
first_name,last_name,password,email
Brook,Simonsen,p4IE,bsimonsen6@princeton.edu
Magdalena,Goggins,b8vh,mgoggins7@japanpost.jp
Riley,Freeburn,i0lLpM,rfreeburn8@so-net.ne.jp
Lelah,Deards,b1<f$#m1,ldeards9@foxnews.com
Keslie,Fevers,v5l1qin4,kfeversa@123-reg.co.uk
Darbie,Garland,d4Gd<#$,dgarlandb@cbslocal.com
Moselle,Adamou,e5$CNlH),madamouc@dot.gov
Yehudit,Darby,v3Kahb_.,ydarbyd@cbc.ca
Man,Icom,z8P*,micome@fda.gov
Leland,Eagland,n3*2Dl,leaglandf@sciencedirect.com
Julienne,Viveash,q0Ei`N3,jviveashg@w3.org
Sharona,Danihel,u4UPd,sdanihelh@blog.com
Carlina,Pressey,i8G'aiC!,cpresseyi@japanpost.jp
Morley,Baty,x3~'Pk6,mbatyj@edublogs.org
```

### 3. Defektai

GamybinÄ— Ä¯monÄ— registruoja gamyboje Ä¯vykusius defektus, kurie registruojami kokybÄ—s kontrolÄ—s proceso metu. Duomenys apima tokiÄ… informacijÄ… kaip defekto tipas, aptikimo data, vieta gaminyje, sunkumo lygis, naudojamas patikrinimo metodas ir remonto iÅ¡laidos.

Duomenis atsisiÅ³skite iÅ¡ [google drive](https://drive.google.com/file/d/1HwYWDCK5CWYeEAXDzi0MWcmR8LjXUXlz/view?usp=sharing
) arba [kaggle.com](https://www.kaggle.com/datasets/fahmidachowdhury/manufacturing-defects/data)

Duomenys sudaryti iÅ¡ 1000 eiluÄiÅ³ `csv`{ lang=python } formatu ir 10 stulpeliÅ³:

- *defect_id*: unikalus defekto identifikatorius;
- *product_id*: produkto, kuriam Ä¯vyko defektas, identifikatorius;
- *defect_type*: defekto tipas;
- *defect_date*: defekto aptikimo data;
- *defect_location*: defekto lokacija produkte;
- *severity*: defekto sunkumo laipsnis;
- *inspection_method*: metodas naudotas defektui aptikti;
- *repair_cost*: patirti kaÅ¡tai taisant defektÄ….

Toliau pateiktos uÅ¾duotys, kurias galite daryti vienoje programoje - faile.

#### 4.1 DefektÅ³ kaina

SuskaiÄiuokite, kiek Ä¯monei kainavo sutaisyti visus defektus. RezultatÄ… pateikite terminale.

#### 4.2 VidutinÄ— defektÅ³ kaina

SuskaiÄiuokite, kiek Ä¯monei vidutiÅ¡kai kainuoja sutaisyti defektÄ…. RezultatÄ… pateikite terminale.

#### 4.3 Brangiausias defektas

KokiÄ… didÅ¾iausiÄ… sumÄ… Ä¯monÄ— iÅ¡leido tvarkant defektÄ…? RezultatÄ… pateikite terminale.

#### 4.4 Produktas 1

Gamybos vadovas nori Ä¯dÄ—miai paanalizuoti produkto, kurio identifikatorius yra `1`, duomenis. Sukurkite failÄ…, kuriame bÅ«tÅ³ pateikti Å¡io produkto defektÅ³ duomenys.

#### 4.5 Defektai pagal tipÄ…

Å½inoma, kad Ä¯monÄ— defektus skirsto Ä¯ tris tipus: Structural, Functional, Cosmetic. Ä®monÄ—je Å¡ie defektai tvarkomi atskiruose padaliniuose. PadaliniÅ³ vadovai praÅ¡o, kad duomenys apie defektus bÅ«tÅ³ pateikti tik tie, kurie priklauso jÅ³ padaliniui. IÅ¡skirstykite duomenis Ä¯ tris atskirus failus: `structural.csv`{ lang=text }, `functional.csv`{ lang=text }, `cosmetic.csv`{ lang=text }.

#### 4.6 DefektÅ³ iÅ¡laidÅ³ dalis pagal tipÄ…

Å½inoma, kad Ä¯monÄ— defektai aptinkami trijose lokacijose: Component, Internal, Surface. KokiÄ… dalÄ¯ tvarkymo iÅ¡laidÅ³ patiria Ä¯monÄ— pagal defekto aptikimo lokacijÄ…? RezultatÄ… pateikite terminale.

### 5. NeÅ¡iojamÅ³ kompiuteriÅ³ kainos

Turime duomenis apie neÅ¡iojamÅ³ kompiuteriÅ³ kainas, Å¡iuos duomenis galite rasti [google drive](https://drive.google.com/file/d/1-DmmaOdzTuLAPTMFn7MWGxNhKtPlFjlT/view?usp=drive_link
) arba [kaggle.com](https://www.kaggle.com/datasets/owm4096/laptop-prices).

DuomenÅ³ faile rasite 1275 eilutes ir 23 stulpelius.

- Company: neÅ¡iojamo kompiuterio gamintojas;
- Product: prekÄ—s Å¾enklas ir modelis;
- TypeName: neÅ¡iojamo kompiuterio tipas (Notebook, Ultrabook, Gaming ir t.t.);
- Inches: ekrano dydis;
- Ram: RAM kiekis neÅ¡iojamame kompiuteryje (gigabaitais);
- OS: Ä¯raÅ¡yta operacinÄ— sistema;
- Weight: svoris kilogramais;
- Price_euros: kaina eurais;
- Screen: ekrano raiÅ¡ka (Standard, Full HD, 4K Ultra HD, Quad HD+);
- ScreenW: ekrano plotis (pikseliais);
- ScreenH: ekrano aukÅ¡tis (pikseliais);
- Touchscreen: ar neÅ¡iojamasis kompiuteris turi jutiklinÄ¯ ekranÄ…;
- IPSpanel: ar neÅ¡iojamasis kompiuteris turi IPS tipo ekranÄ…;
- RetinaDisplay: ar neÅ¡iojamasis kompiuteris turi retina tipo ekranÄ…;
- CPU_company: procesoriaus gamintojas;
- CPU_freq: procesoriaus daÅ¾nis;
- CPU_model: procesoriaus modelis;
- PrimaryStorage: pagrindinÄ—s atminties dydis (GB);
- PrimaryStorageType: pagrindinÄ—s atminties tipas (HDD, SSD, Flash Storage, Hybrid);
- SecondaryStorage: kitos atminties dydis, jeigu egzistuoja (GB);
- SecondaryStorageType: kitos atminties tipas, jeigu egzistuoja (HDD, SSD, Hybrid, None);
- GPU_company: vaizdo plokÅ¡tÄ—s gamintojas;
- GPU_model: vaizdo plokÅ¡tÄ—s modelis.

IÅ¡ duomenÅ³ sudarykite ataskaitÄ… (tekstinÄ¯ failÄ…), kuriame bÅ«tÅ³:

- Vidutinis kompiuterio svoris;
- KompiuteriÅ³ kiekis be operacinÄ—s sistemos;
- VidutinÄ— kompiuterio kaina;
- lentelÄ— su TOP10 brangiausiÅ³ neÅ¡iojamÅ³ kompiuteriÅ³ (pateikti kainÄ…, pavadinimÄ…, ekrano dydÄ¯, operacinÄ™ sistemÄ…);
- lentelÄ— su TOP10 pigiausiÅ³ neÅ¡iojamÅ³ kompiuteriÅ³ (pateikti kainÄ…, pavadinimÄ…, ekrano dydÄ¯, operacinÄ™ sistemÄ…);
- lentelÄ—, kurioje kompiuteriÅ³ kaina skiriasi ne daugiau nei 100 nuo vidurkio, procesorius yra i5 arba i7, o pagrindinÄ— atmintis yra SSD tipo (pateikti kainÄ…, pavadinimÄ…, ekrano dydÄ¯, operacinÄ™ sistemÄ…);
